import{_ as A,c as Q,o as f,a as k,b as o,t as w,F as j,r as F,d as c,n as $,l as O,e as S,f as b,g as I,h as X,i as G,j as Y,k as U,m as tt}from"./index.c85cfa26.js";import{f as et,a as ot,b as st,R as at,S as nt}from"./ScrollTopButton.59f83ecb.js";const lt={name:"StockInvestDBTable",props:["investData","conditionStatus","title"],setup(l,{emit:a}){const i=Q(()=>l.investData.filter(_=>{const h=new Set(_.tech),s=new Set(l.conditionStatus);if(t(h,s).size===s.size||s.size===0)return _})),t=function(_,h){return new Set([..._].filter(d=>h.has(d)))};return{chi_investData:i,emit:a}}},ct={class:"mx-10 relative overflow-x-auto shadow-md sm:rounded-lg border"},rt={class:"p-2 bg-gray-900 h-auto w-auto"},it={class:"text-center text-xl text-gray-50"},dt={class:"text-sm text-left text-gray-500 dark:text-gray-400 table-auto"},_t=o("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[o("tr",null,[o("th",{scope:"col",class:"px-6 py-3 text-center"},"\u6392\u540D"),o("th",{scope:"col",class:"px-6 py-3 text-center"},"\u4EE3\u865F"),o("th",{scope:"col",class:"px-6 py-3 text-center w-56"},"\u540D\u7A31")])],-1),ut=["onClick"],ht={scope:"row",class:"px-10 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},mt={class:"px-10 py-4"},ft={class:"px-10 py-4"};function gt(l,a,i,t,_,h){return f(),k("div",ct,[o("div",rt,[o("p",it,w(i.title),1)]),o("table",dt,[_t,o("tbody",null,[(f(!0),k(j,null,F(t.chi_investData,s=>(f(),k("tr",{class:"border-b dark:bg-gray-800 dark:border-gray-700 text-center cursor-pointer hover:bg-sky-200 ease-in-out duration-500",onClick:d=>t.emit("openModal",s),key:s.name},[o("th",ht,w(s.no||""),1),o("td",mt,w(s.code||""),1),o("td",ft,w(s.name||""),1)],8,ut))),128))])])])}var kt=A(lt,[["render",gt]]);const pt={name:"StockFilterList",props:["techList"],setup(l,{emit:a}){const i=l.techList,t=c([]);return{chi_techList:i,conditionStatus:t,commonClass:function(){return["p-2","border","rounded-md"]},conditionalSelection:function(g){t.value.includes(g)?t.value=t.value.filter(D=>D!==g):t.value.push(g),a("postFilterCondition",t)},cancelAll:function(){t.value=[],a("postFilterCondition",t)},selectedBgClass:function(g){return{"bg-red-400":t.value.includes(g)}}}}},vt={class:"flex flex-col justify-start items-end bg-slate-300 rounded-md p-2 sm:overflow-y-auto sm:h-96"},yt=["onClick"],bt={class:"flex flex-row justify-start iemts-center"};function xt(l,a,i,t,_,h){return f(),k("div",vt,[(f(!0),k(j,null,F(t.chi_techList,s=>(f(),k("button",{key:s.name,class:"p-2",onClick:d=>t.conditionalSelection(s.key)},[o("span",{class:$([[t.selectedBgClass(s.key),t.commonClass()],"ease-in-out duration-500 border-gray-500"])},w(s.name),3)],8,yt))),128)),o("div",bt,[o("button",{class:"p-2",onClick:a[0]||(a[0]=s=>t.cancelAll())},[o("span",{class:$(t.commonClass())},"\u53D6\u6D88\u9078\u53D6",2)])])])}var St=A(pt,[["render",xt]]);O.add(et);const wt={name:"StockModalLink",props:["propsToModal","linkWeb"],setup(l,{emit:a}){return{emit:a}}},Dt={"aria-hidden":"true",class:"overflow-y-auto overflow-x-hidden w-full h-full"},Ct={class:"relative p-4 w-full max-w-md h-full md:h-auto"},$t={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},Mt=o("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Bt=[Mt],Lt={class:"py-4 px-6 rounded-t border-b dark:border-gray-600"},Ht={class:"text-base font-semibold text-gray-900 lg:text-xl dark:text-white"},jt={class:"p-6 sm:h-96 sm:overflow-y-scroll"},At=["href"],Ft={class:"flex-1 ml-3 whitespace-nowrap"},Vt={class:"inline-flex items-center justify-center px-2 py-0.5 ml-3 text-xs font-medium text-gray-500 bg-gray-200 rounded dark:bg-gray-700 dark:text-gray-400"};function zt(l,a,i,t,_,h){const s=S("font-awesome-icon");return f(),k("div",Dt,[o("div",Ct,[o("div",$t,[o("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white",onClick:a[0]||(a[0]=d=>t.emit("closeModal",{no:"",code:"",name:""}))},Bt),o("div",Lt,[o("h3",Ht,w(i.propsToModal.code)+" "+w(i.propsToModal.name),1)]),o("div",jt,[(f(!0),k(j,null,F(i.linkWeb,d=>(f(),k("ul",{class:"my-4 space-y-3",key:d.name},[o("li",null,[o("a",{href:d.frontHref+i.propsToModal.code+d.backHref,class:"flex items-center p-3 text-base font-bold text-gray-900 bg-gray-50 rounded-lg hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white"},[o("span",Ft,w(d.name),1),o("span",Vt,[b(s,{icon:"link"})])],8,At)])]))),128))])])])])}var It=A(wt,[["render",zt]]);const Tt={props:["mirrorStatus"]},Rt={key:0,class:"fixed h-full w-full bg-gray-900/70 bg-cover z-20"};function Nt(l,a,i,t,_,h){return i.mirrorStatus?(f(),k("div",Rt)):I("",!0)}var Ot=A(Tt,[["render",Nt]]);const Gt=X("getTechSheet",function(){const{proxy:l}=G(),a=c([]),i=c([]),t=c([]),_=c([]),h=c([]),s=c([]),d=c([]),g=c([]),D=c([]),x=c([]),B=l.axios.get(`${l.envURL}/stockApi/sheetData/tech/kd`),L=l.axios.get(`${l.envURL}/stockApi/sheetData/tech/macd`),M=l.axios.get(`${l.envURL}/stockApi/sheetData/tech/avg`),y=l.axios.get(`${l.envURL}/stockApi/sheetData/tech/local_buy_sell`),H=l.axios.get(`${l.envURL}/stockApi/sheetData/tech/foreign_buy_sell`);return{getSheetData:async function(){try{await Promise.all([B,L,M,y,H]).then(u=>(a.value=u[0].data.sheetsData.kd_gold_stock_name,i.value=u[0].data.sheetsData.kd_death_stock_name,t.value=u[1].data.sheetsData.macd_gold_stock_name,_.value=u[1].data.sheetsData.macd_death_stock_name,h.value=u[2].data.sheetsData.avg_gold_stock_name,s.value=u[2].data.sheetsData.avg_death_stock_name,d.value=u[3].data.sheetsData.buy_stock_name,g.value=u[3].data.sheetsData.sell_stock_name,D.value=u[4].data.sheetsData.buy_stock_name,x.value=u[4].data.sheetsData.sell_stock_name,console.log("get TechData OK"),u)).catch(u=>{throw u})}catch(u){console.error(u)}},kd_gold:a,kd_death:i,macd_gold:t,macd_death:_,avg_gold:h,avg_death:s,local_c_buy:d,local_c_sell:g,foreign_c_buy:D,foreign_c_sell:x}});O.add(ot,st);const Ut={components:{StockInvestDBTableVue:kt,StockFilterListVue:St,StockModalLink:It,RectangleNameVue:at,ScrollTopButton:nt,BlackMirrorVue:Ot},setup(){const{proxy:l}=G(),a=l.axios.get(`${l.envURL}/stockApi/sheetData/invest`);let i=c(!0);const t=Gt();Y(async()=>{await t.getSheetData(),i.value=!1});let _=c([]),h=c([]),s=c(""),d=c(""),g=c("");const D=async function(e){try{let n=z.value.find(p=>p.key===e);if(d.value=n.name,g.value=n.link,e==="localForeign_same"){s.value=e,R();return}const{data:r}=await a;s.value=e,_.value=x(r[`${e}`][`${e}_buy_no`],r[`${e}`][`${e}_buy_code`],r[`${e}`][`${e}_buy_name`]),h.value=x(r[`${e}`][`${e}_sell_no`],r[`${e}`][`${e}_sell_code`],r[`${e}`][`${e}_sell_name`])}catch(n){console.error(n)}};function x(e,n,r){const p=[];for(let v=0,m=r.length;v<m;v++)p.push({no:e[v],code:n[v].replace("code-",""),name:r[v],tech:B(r[v])});return p}const B=function(e){const n=[],r=new Set(t.kd_gold),p=new Set(t.kd_death),v=new Set(t.macd_gold),m=new Set(t.macd_death),C=new Set(t.avg_gold),Z=new Set(t.avg_death),P=new Set(t.local_c_buy),q=new Set(t.local_c_sell),E=new Set(t.foreign_c_buy),J=new Set(t.foreign_c_sell);return r.has(e)&&n.push("kd_gold"),p.has(e)&&n.push("kd_death"),v.has(e)&&n.push("macd_gold"),m.has(e)&&n.push("macd_death"),C.has(e)&&n.push("avg_gold"),Z.has(e)&&n.push("avg_death"),P.has(e)&&n.push("local_buy"),q.has(e)&&n.push("local_sell"),E.has(e)&&n.push("foreign_buy"),J.has(e)&&n.push("foreign_sell"),n},L=[{name:"KD \u9EC3\u91D1\u4EA4\u53C9",key:"kd_gold"},{name:"KD \u6B7B\u4EA1\u4EA4\u53C9",key:"kd_death"},{name:"MACD \u9EC3\u91D1\u4EA4\u53C9",key:"macd_gold"},{name:"MACD \u6B7B\u4EA1\u4EA4\u53C9",key:"macd_death"},{name:"\u5747\u7DDA\u591A\u982D\u6392\u5217",key:"avg_gold"},{name:"\u5747\u7DDA\u7A7A\u982D\u6392\u5217",key:"avg_death"},{name:"\u6295\u4FE1\u9023\u7E8C\u8CB7\u8D85\u500B\u80A1",key:"local_buy"},{name:"\u6295\u4FE1\u9023\u7E8C\u8CE3\u8D85\u500B\u80A1",key:"local_sell"},{name:"\u5916\u8CC7\u9023\u7E8C\u8CB7\u8D85\u500B\u80A1",key:"foreign_buy"},{name:"\u5916\u8CC7\u9023\u7E8C\u8CE3\u8D85\u500B\u80A1",key:"foreign_sell"}],M=c([]),y=function(e){M.value=e.value};let H=c(!1),V=c({});const u=function(e){V.value=e,H.value=e.name.length>0};let T=c([]);T.value=[{name:"yahoo Stock",frontHref:"https://tw.stock.yahoo.com/quote/",backHref:""},{name:"\u73A9\u80A1\u7DB2",frontHref:"https://www.wantgoo.com/stock/",backHref:""},{name:"Hi Stock \u55E8\u6295\u8CC7",frontHref:"https://histock.tw/stock/",backHref:""},{name:"PC Home \u80A1\u5E02",frontHref:"https://stock.pchome.com.tw/stock/sid",backHref:".html"},{name:"Goodinfo! \u53F0\u7063\u80A1\u5E02\u8CC7\u8A0A\u7DB2",frontHref:"https://goodinfo.tw/tw/StockDetail.asp?STOCK_ID=",backHref:""},{name:"anue \u9245\u4EA8\u7DB2",frontHref:"https://invest.cnyes.com/twstock/TWS/",backHref:""},{name:"\u53F0\u7063\u8B49\u5238\u4EA4\u6613\u6240",frontHref:"https://mis.twse.com.tw/stock/fibest.jsp?stock=",backHref:""},{name:"\u80A1\u5E02\u7206\u6599\u540C\u5B78\u6703",frontHref:"https://www.cmoney.tw/forum/stock/",backHref:""}];let z=c([]);z.value=[{name:"\u4E0A\u5E02\u6295\u4FE1\u8CB7\u8CE3\u8D85",key:"local_listed",link:"https://fubon-ebrokerdj.fbs.com.tw/Z/ZG/ZGK_DD.djhtm"},{name:"\u4E0A\u6AC3\u6295\u4FE1\u8CB7\u8CE3\u8D85",key:"local_otc",link:"https://fubon-ebrokerdj.fbs.com.tw/z/zg/zgk.djhtm?A=DD&B=1&C=1"},{name:"\u4E0A\u5E02\u5916\u8CC7\u8CB7\u8CE3\u8D85",key:"foreign_listed",link:"https://fubon-ebrokerdj.fbs.com.tw/Z/ZG/ZGK_D.djhtm"},{name:"\u4E0A\u6AC3\u5916\u8CC7\u8CB7\u8CE3\u8D85",key:"foreign_otc",link:"https://fubon-ebrokerdj.fbs.com.tw/z/zg/zgk.djhtm?A=D&B=1&C=1"},{name:"\u5916\u8CC7\u6295\u4FE1\u540C\u6B65\u8CB7\u8CE3\u8D85",key:"localForeign_same",link:""}];const R=async function(){const{data:e}=await a,n=N([e.local_listed,e.local_otc,e.foreign_listed,e.foreign_otc],"buy"),r=N([e.local_listed,e.local_otc,e.foreign_listed,e.foreign_otc],"sell");_.value=x(n.no,n.code,n.name),h.value=x(r.no,r.code,r.name)},N=function(e,n){let r=[],p=[],v=[];for(let m=0,C=e.length;m<C;m++)r.push(...e[m][`${e[m].type}_${n}_name`]),p.push(...e[m][`${e[m].type}_${n}_code`]);return r=r.filter((m,C)=>r.indexOf(m)!==C),p=p.filter((m,C)=>p.indexOf(m)!==C),v=r.map(m=>v.push(m)),{name:r,code:p,no:v}};let K=c(window.innerWidth<1200),W=c(window.innerWidth<1200);return{getInvestSheetData:D,updateFilterCondition:y,troggleModalF:u,composeSameArray:R,toggleInvestStatus:K,toggleTechStatus:W,conditionStatus:M,buy_page_list:_,sell_page_list:h,techList:L,modalStatus:H,propsToModal:V,linkWeb:T,buttonContent:z,titleName:d,titleHref:g,loadingStatus:i,selectedButton:s}}},Kt={class:"flex flex-col justify-start items-center"},Wt={class:"flex flex-row justify-between w-full fixed z-10 m-10"},Zt=U(" \u6CD5\u4EBA\u8CB7\u8CE3\u8D85"),Pt=U(" \u6280\u8853\u5206\u6790\u2002\u2009 "),qt=["onClick"],Et={class:"flex flex-row justify-center items-start w-full sm:flex-col sm:items-center mt-8 sm:mt-40"},Jt={key:0,class:"fixed top-50 z-30"},Qt={class:"fixed left-2 sm:visible md:visible invisible"};function Xt(l,a,i,t,_,h){const s=S("font-awesome-icon"),d=S("StockFilterListVue"),g=S("StockInvestDBTableVue"),D=S("StockModalLink"),x=S("RectangleNameVue"),B=S("ScrollTopButton"),L=S("BlackMirrorVue"),M=S("loading-view");return f(),k(j,null,[o("div",Kt,[o("div",Wt,[o("button",{onClick:a[0]||(a[0]=y=>t.toggleInvestStatus=!t.toggleInvestStatus),class:$(["fixed left-0 px-6 py-2 text-sm transition-colors rounded shadow-xl bg-slate-500 hover:bg-slate-600 text-slate-100 shadow-slate-400 duration-500",{"-translate-x-24":t.toggleInvestStatus}])},[Zt,b(s,{icon:"list",class:"mx-2"})],2),o("button",{onClick:a[1]||(a[1]=y=>t.toggleTechStatus=!t.toggleTechStatus),class:$(["fixed right-0 px-6 py-2 text-sm transition-colors rounded shadow-xl bg-slate-500 hover:bg-slate-600 text-slate-100 shadow-slate-400 duration-500",{"translate-x-24":t.toggleTechStatus}])},[b(s,{icon:"list",class:"mx-2"}),Pt],2)]),o("div",{class:$(["flex flex-col justify-center items-start bg-slate-300 opacity-90 fixed left-0 z-10 my-20 p-4 rounded-md duration-500",{"-translate-x-full":t.toggleInvestStatus}])},[(f(!0),k(j,null,F(t.buttonContent,y=>(f(),k("button",{onClick:H=>t.getInvestSheetData(y.key),class:"rounded-md border border-gray-500 p-2 mb-1",key:y.key},[t.selectedButton===y.key?(f(),tt(s,{key:0,icon:"arrow-trend-up",style:{color:"red"},class:"mr-2"})):I("",!0),o("span",{class:$(["inline",{"underline underline-offset-2 text-red-600":t.selectedButton===y.key}])},w(y.name),3)],8,qt))),128))],2),o("div",{class:$(["fixed right-0 my-20 z-10 duration-500 opacity-90",{"translate-x-full":t.toggleTechStatus}])},[b(d,{techList:t.techList,onPostFilterCondition:t.updateFilterCondition},null,8,["techList","onPostFilterCondition"])],2),o("div",Et,[b(g,{investData:t.buy_page_list,title:"\u8CB7\u8D85",conditionStatus:t.conditionStatus,onOpenModal:t.troggleModalF,class:"sm:mt-2"},null,8,["investData","conditionStatus","onOpenModal"]),b(g,{investData:t.sell_page_list,title:"\u8CE3\u8D85",conditionStatus:t.conditionStatus,onOpenModal:t.troggleModalF,class:"sm:mt-2"},null,8,["investData","conditionStatus","onOpenModal"])]),t.modalStatus?(f(),k("div",Jt,[b(D,{onCloseModal:t.troggleModalF,propsToModal:t.propsToModal,linkWeb:t.linkWeb},null,8,["onCloseModal","propsToModal","linkWeb"])])):I("",!0),o("div",Qt,[b(x,{titleName:t.titleName,titleHref:t.titleHref},null,8,["titleName","titleHref"])]),b(B)]),b(L,{mirrorStatus:t.modalStatus},null,8,["mirrorStatus"]),b(M,{loadingStatus:t.loadingStatus},null,8,["loadingStatus"])],64)}var ee=A(Ut,[["render",Xt]]);export{ee as default};
